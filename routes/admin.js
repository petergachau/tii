
import express  from "express";
import TourModal from '../models/tour.js'

import moment from 'moment'

const router = express.Router();


router.get ('/electronics',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Electronics'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/furnatures',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Furnatures'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/cars',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Cars'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/phones',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Phones'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/clothings',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Clothings'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/electronics',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Electronics'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/code',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Computer Skills'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/capentery ',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Capentery and Masonery'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/driving',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Driving'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/teaching',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Teaching'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/fashion',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Fashion/Design'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/jobs',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Jobs'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/hookups',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Hookups'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})
router.get ('/others',  async (req,res)=>{
    const previosMonth=moment()
    .month(moment().month()-12)
    .set('date',1)
    .format('YYYY-MM-DD HH:mm:ss');
    // res.status(200).send(previosMonth)
    try {
        const users= await TourModal.aggregate([
            { $match : { brand:'Others'} },
            
            // { $match : { isAdmin : true } },
            // { $match : { supervisor : true } },
        ]);
        res.status(200).send(users);
    } catch (error) {
        console.log(error);
        res.status(500).send(error)
    }


})


export default router